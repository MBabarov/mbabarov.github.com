<ons-page class="center product-criteria-page" ng-controller="ProductCriteriaCtrl">
    <ons-toolbar title="Продукт">
        <div class="left">
             <ons-back-button></ons-back-button>
        </div>
        <div class="center">
            {{filtersCriteriaProducerProductFactory.currentProduct.nameProduct}}
        </div>
        <div class="right">

        </div>
    </ons-toolbar>
    <div class="button-bar">
        <div class="padded-10">
            <div class="loading blue-color padded-20" ng-if="!filtersCriteriaProducerProductFactory.ready">
                <ons-icon icon="fa-circle-o-notch" size="lg" spin="true"></ons-icon>
            </div>
            <div ng-if="filtersCriteriaProducerProductFactory.ready && producersNotEmpty">
                <div dropdown-select="ddSelectOptions" dropdown-model="ddSelectSelected"></div>
            </div>
        </div>
    </div>
    <div class="navigator-container">
		<div class="navigator-content relative">
			<div class="full-screen scroller-wrapper">
            <div class="full-screen scroller-wrapper extra-scroll-block">
                <div class="loading blue-color padded-20" ng-if="!readyListProducts && filtersCriteriaProducerProductFactory.ready ">
                    <ons-icon icon="fa-circle-o-notch" size="lg" spin="true"></ons-icon>
                </div>
                <ul ng-if="readyListProducts && filtersCriteriaProducerProductFactory.ready" >
                    <li class="listProducts" ng-init="index=$index" ng-repeat="oneProduct in listProducts">
                        <ons-row>
                            <ons-col class="padded-10 width-120">
                                <img ng-src="{{oneProduct.imageProduct['url']}}" alt="" />
                            </ons-col>
                            <ons-col class="padded-5-10 left">
                                <div ng-repeat="oneCriteria in oneProduct.generalCriteria">
                                    <div class="padded-5-0" ng-repeat="i in oneCriteria">
                                        <div ng-repeat="(key, value)  in i">
                                            {{key}}: {{value}}
                                        </div>
                                    </div>
                                </div>
                                <div class="padded-5-0" ng-repeat="(key, value) in oneProduct.amountProduct">
                                    <ons-row>
                                        <ons-col class="width-80">
                                            <span for="count{{index}}">{{key}}</span>
                                        </ons-col>
                                        <ons-col>
                                            <input id="count{{index}}" type="text" value="{{value}}" />
                                        </ons-col>
                                    </ons-row>
                                </div>
                                <ons-toolbar-button ng-click="saveEditProduct();" class="button--large--cta button--bottom">Сохранить</ons-toolbar-button>
                            </ons-col>
                        </ons-row>
                    </li>
                </ul>
                <p ng-if="readyListProducts && listProducts.length==0" class="left padded-10">
                    К сожалению, в данный момент нет товара с такими критериями
                </p>
                <ons-bottom-toolbar class="padded-22-0 bottom-button-block">
                    <ons-row>
                        <ons-col>
                            <div>
                                <button class="button--large--cta btn-white button--bottom" ng-click="moveToProductsListPage()">Отменить</button>
                            </div>
                        </ons-col>
                    </ons-row>
                </ons-bottom-toolbar>
			</div>
			</div>
		</div>
	</div>
</ons-page>